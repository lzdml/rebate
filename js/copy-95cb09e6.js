var u=Object.defineProperty;var c=(d,e,s)=>e in d?u(d,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[e]=s;var a=(d,e,s)=>(c(d,typeof e!="symbol"?e+"":e,s),s);class l{constructor(){a(this,"messageQueue");a(this,"position");a(this,"message");a(this,"types");a(this,"type");a(this,"duration");a(this,"body");a(this,"id");a(this,"zIndex");a(this,"max");this.messageQueue=[],this.position="top",this.message="",this.types=["success","warning","error","info"],this.type="",this.duration=3e3,this.body=document.getElementsByTagName("body")[0],this.id=0,this.zIndex=2e3,this.max=3}setType(e,s){this.types.includes(s)?e.classList.add(`ui-message-${s}`):e.classList.add("ui-message-info")}createTextDom(e,s){const t=document.createElement("p");t.classList.add("message-content"),t.innerHTML=s||this.message,e.appendChild(t)}updateMessageDom(e,s){for(let t=e;t<this.messageQueue.length;t++){const i=this.messageQueue[t].messageDom;i.style.zIndex=`${s+t}`,i.style.top=`${64*t+20}px`}}removeMessageDom(e,s,t){const i=this.messageQueue.findIndex(m=>m.id===s);this.messageQueue.splice(i,1),this.updateMessageDom(i,t),e.classList.add("ui-message-leave"),setTimeout(()=>{this.body.removeChild(e)},400)}setCurrentMessageDom(e){const s=this.messageQueue.length-1,t=this.messageQueue[s].messageDom;t.style.zIndex=`${e+s}`,t.style.top=`${64*s+20}px`}setOption(e){if(typeof e!="object"&&(e={}),this.messageQueue.length>=this.max)return;const s=document.createElement("div");s.classList.add("ui-message"),s.classList.add("ui-message-leave"),e.center&&s.classList.add("ui-message-center");const t=this.id,i=e.zIndex?e.zIndex:this.zIndex;this.messageQueue.push({id:t,messageDom:s}),this.setType(s,e.type),this.createTextDom(s,e.message),this.setCurrentMessageDom(i),this.body.appendChild(s),setTimeout(()=>{s.classList.remove("ui-message-leave")});let m=null;e.showClose&&(m=document.createElement("i"),m.classList.add("close-button"),s.appendChild(m));const n=isNaN(Number(e.duration))?this.duration:Number(e.duration);let o=-1;n!==0&&(o=setTimeout(()=>{this.removeMessageDom(s,t,i)},n)),e.showClose&&m.addEventListener("click",()=>{this.removeMessageDom(s,t,i),t!==-1&&clearTimeout(o)}),this.id++}}const h=new l,r=(d,{msg:e="已复制",type:s="success",duration:t=2e3})=>{console.log("targetValue :>> ",d);const i=document.createElement("input");i.value=d,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),h.setOption({message:`<div class="flex items-center gap-x-1.5">${e}</div>`,type:s??"success",duration:t??2e3})};export{r as c};
