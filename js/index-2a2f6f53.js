import{t as L,d as B,S as D,u as T,W as F,o as c,i as m,e as _,x as V,j as o,z as e,y as h,p as f,s as I,k as N,m as w,ap as O,aq as Q,D as j,E as U,_ as z}from"./index-ba2f5e6c.js";import"./index-de53f466.js";import{B as q}from"./index-a6dc3972.js";import{F as M}from"./index-4c9398dc.js";import"./useGeolocation-4462b21d.js";import{u as G}from"./loading-e21cd546.js";import{u as H}from"./useCode-34e806a0.js";import{P as b,a as P}from"./enum-23cc78c4.js";import{s as J,g as K}from"./index-1d581b1b.js";import{C as X}from"./index-1d2a0cea.js";import"./use-id-06405334.js";import"./use-expose-05cadcf1.js";var r=(s=>(s[s.CODE=0]="CODE",s[s.PASSWORD=1]="PASSWORD",s))(r||{});function Y(){const s=L(0);function g(d){return s.value===d}function p(d){s.value=d}return{setLoginState:p,currentState:s,getShow:g}}const y=s=>(j("data-v-55c20f22"),s=s(),U(),s),Z={class:"content pt-25"},ee=y(()=>o("div",{class:"pl-8"},[o("h1",{class:"text-c_theme font-bold mb-2"},"xx优选"),o("p",{class:"text-[#999]"},"未注册过的手机号将自动创建账号")],-1)),te={class:"px-4 mb-14"},oe={class:"mb-3 rounded-md bg-white mt-10"},se=y(()=>o("div",{class:"van-hairline--top mb-[1px]"},null,-1)),le={key:0,class:"pr-4 flex items-center"},ae=["disabled"],ne={class:"pl-3 mb-14 flex items-center"},re={class:"text-xs ml-1.5"},ie={class:"text-xs font-400 flex items-center justify-center mb-23"},de=y(()=>o("p",{class:"w-px h-2 bg-black mx-3"},null,-1)),ce=B({name:"Login"}),pe=B({...ce,setup(s){const{isStart:g,startDown:p,getButtonText:d}=H(),a=D({account:"",code:"",pwd:"",agree:!1}),{setLoginState:C,getShow:i,currentState:ue}=Y(),v=(n,t)=>O.push({name:n,query:t}),u=D({redirect:"",otherQuery:{}}),S=T();console.log("route :>> ",S),F(()=>S.query,n=>{var t;console.log("query :>> ",n),n&&(u.redirect=((t=n.redirect)==null?void 0:t.toString())??"",u.otherQuery=K(n))},{immediate:!0});const{loading:E,setLoading:k}=G({initValue:!1}),R=async()=>{k(!0),i(r.CODE),i(r.PASSWORD),Q("token"),await J(1500),k(!1);const n={path:u.redirect||"/home",query:u.otherQuery};O.replace(n)},A={fieldLabelColor:"#000000",fieldLabelMarginRight:"24px",buttonDisabledOpacity:"#F02D2D"};return(n,t)=>{const x=M,W=q,$=X;return c(),m("div",Z,[ee,_($,{"theme-vars":A},{default:V(()=>[o("div",te,[o("div",oe,[_(x,{modelValue:e(a).account,"onUpdate:modelValue":t[0]||(t[0]=l=>e(a).account=l),border:!1,clearable:"","label-width":"auto","label-class":"ipt_label",label:"手机号",placeholder:"请输入手机号",class:"p-4 h-14 bg-transparent"},null,8,["modelValue"]),se,e(i)(e(r).CODE)?(c(),m("div",le,[_(x,{modelValue:e(a).code,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).code=l),border:!1,clearable:"","label-width":"auto","label-class":"ipt_label",label:"验证码",maxlength:"6",placeholder:"请输入验证码",class:"ipt"},null,8,["modelValue"]),o("button",{class:"text-[14px] text-c_theme border-none p-0 bg-transparent whitespace-nowrap",disabled:e(g),onClick:t[2]||(t[2]=(...l)=>e(p)&&e(p)(...l))},h(e(d)),9,ae)])):f("",!0),e(i)(e(r).PASSWORD)?(c(),I(x,{key:1,modelValue:e(a).pwd,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).pwd=l),border:!1,type:"password","label-width":"auto","label-class":"ipt_label",label:"密码",clearable:"",placeholder:"请输入密码",class:"ipt"},null,8,["modelValue"])):f("",!0)]),o("div",ne,[o("div",{class:"w-3.5 h-3.5 rounded-full flex justify-center items-center",border:"~ solid #f02d2d",onClick:t[4]||(t[4]=l=>e(a).agree=!e(a).agree)},[o("div",{class:N({"w-2 h-2 rounded-full bg-c_theme":e(a).agree})},null,2)]),o("p",re,[w(" 我已阅读并同意 "),o("span",{class:"text-c_theme",onClick:t[5]||(t[5]=l=>v("Protocol",{type:e(b).privacy}))}," 《"+h(e(P)[e(b).privacy])+"》 ",1),w(" 与 "),o("span",{class:"text-c_theme",onClick:t[6]||(t[6]=l=>v("Protocol",{type:e(b).serve}))}," 《"+h(e(P)[e(b).serve])+"》 ",1)])]),_(W,{type:"primary",block:"",round:"",color:"#F02D2D",class:"login_btn",loading:e(E),onClick:R},{default:V(()=>[w(" 登录 ")]),_:1},8,["loading"]),o("div",ie,[e(i)(e(r).CODE)?(c(),m("p",{key:0,class:"switch_login_pwd",onClick:t[7]||(t[7]=l=>e(C)(e(r).PASSWORD))}," 切换密码登录 ")):f("",!0),e(i)(e(r).CODE)?f("",!0):(c(),m("p",{key:1,class:"switch_login_pwd",onClick:t[8]||(t[8]=l=>e(C)(e(r).CODE))}," 切换验证码登录 ")),de,o("p",{class:"switch_forget_pwd",onClick:t[9]||(t[9]=l=>v("SecureAuth",{type:"forget-password"}))}," 忘记密码 ")])])]),_:1})])}}});const ke=z(pe,[["__scopeId","data-v-55c20f22"]]);export{ke as default};
